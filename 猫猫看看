# -*- coding: utf-8 -*-
#!/usr/bin/env python3
"""
* 仅供学习交流，请在下载后的24小时内完全删除 请勿将任何内容用于商业或非法目的，否则后果自负。
* 猫猫看看 V1.54

* 活动入口,微信打开：
* 如果连接过期了运行一下就出来了最新的入口！
* http://9pw4.dsdtew.shop/haobaobao/auth/58487f291985c5f32c16b3b01b96a912
* 打开活动入口，抓包的任意接口cookies中的Cookie参数
* 
* 变量格式：
* 新建同名环境变量
* 变量名：mykkyd
* 变量值：
* # 3000 代表 3毛，后面两个推送参数可不填，那就必须配置全局推送！
* 账号备注#Cookie参数#提现金额如3000#wxpushApptoken#wxpushTopicId
* 
* 其他参数说明（脚本最下方填写参数）
* wxpusher全局参数：wxpusherAppToken、wxpusherTopicId
* 具体使用方法请看文档地址：https://wxpusher.zjiecode.com/docs/#/
* 
* 也可使用 微信机器人：wechatBussinessKey
* 
* 支持支付宝提现：账号备注#Cookie参数#提现金额如3000#wxpushApptoken#wxpushTopicId#支付宝姓名#支付宝账号
* 只想提现支付宝，不想填写其他参数，最少的参数就是：账号备注#Cookie参数###支付宝姓名#支付宝账号
*
* 增加 自定义检测文章等待时间：mykkydReadPostDelay，默认值是 15-20秒
* 增加 精简日志：mykkydReadPureLog，默认值是 true（也就是精简日志，如果需要显示完整的，请设置为 false）
*
* 定时运行每半小时一次
* 达到标准，自动提现
"""
# This file requires Python 3.x and the following dependencies:
# - base64
try:
    import base64
    exec(base64.b64decode('IiIiCiog5LuF5L6b5a2m5Lmg5Lqk5rWB77yM6K+35Zyo5LiL6L295ZCO55qEMjTlsI/ml7blhoXlrozlhajliKDpmaQg6K+35Yu/5bCG5Lu75L2V5YaF5a6555So5LqO5ZWG5Lia5oiW6Z2e5rOV55uu55qE77yM5ZCm5YiZ5ZCO5p6c6Ieq6LSf44CCCiog54yr54yr55yL55yLIFYxLjU0CgoqIOa0u+WKqOWFpeWPoyzlvq7kv6HmiZPlvIDvvJoKKiDlpoLmnpzov57mjqXov4fmnJ/kuobov5DooYzkuIDkuIvlsLHlh7rmnaXkuobmnIDmlrDnmoTlhaXlj6PvvIEKKiBodHRwOi8vOXB3NC5kc2R0ZXcuc2hvcC9oYW9iYW9iYW8vYXV0aC81ODQ4N2YyOTE5ODVjNWYzMmMxNmIzYjAxYjk2YTkxMgoqIOaJk+W8gOa0u+WKqOWFpeWPo++8jOaKk+WMheeahOS7u+aEj+aOpeWPo2Nvb2tpZXPkuK3nmoRDb29raWXlj4LmlbAKKiAKKiDlj5jph4/moLzlvI/vvJoKKiDmlrDlu7rlkIzlkI3njq/looPlj5jph48KKiDlj5jph4/lkI3vvJpteWtreWQKKiDlj5jph4/lgLzvvJoKKiAjIDMwMDAg5Luj6KGoIDPmr5vvvIzlkI7pnaLkuKTkuKrmjqjpgIHlj4LmlbDlj6/kuI3loavvvIzpgqPlsLHlv4XpobvphY3nva7lhajlsYDmjqjpgIHvvIEKKiDotKblj7flpIfms6gjQ29va2ll5Y+C5pWwI+aPkOeOsOmHkemineWmgjMwMDAjd3hwdXNoQXBwdG9rZW4jd3hwdXNoVG9waWNJZAoqIAoqIOWFtuS7luWPguaVsOivtOaYju+8iOiEmuacrOacgOS4i+aWueWhq+WGmeWPguaVsO+8iQoqIHd4cHVzaGVy5YWo5bGA5Y+C5pWw77yad3hwdXNoZXJBcHBUb2tlbuOAgXd4cHVzaGVyVG9waWNJZAoqIOWFt+S9k+S9v+eUqOaWueazleivt+eci+aWh+aho+WcsOWdgO+8mmh0dHBzOi8vd3hwdXNoZXIuemppZWNvZGUuY29tL2RvY3MvIy8KKiAKKiDkuZ/lj6/kvb/nlKgg5b6u5L+h5py65Zmo5Lq677yad2VjaGF0QnVzc2luZXNzS2V5CiogCiog5pSv5oyB5pSv5LuY5a6d5o+Q546w77ya6LSm5Y+35aSH5rOoI0Nvb2tpZeWPguaVsCPmj5DnjrDph5Hpop3lpoIzMDAwI3d4cHVzaEFwcHRva2VuI3d4cHVzaFRvcGljSWQj5pSv5LuY5a6d5aeT5ZCNI+aUr+S7mOWunei0puWPtwoqIOWPquaDs+aPkOeOsOaUr+S7mOWune+8jOS4jeaDs+Whq+WGmeWFtuS7luWPguaVsO+8jOacgOWwkeeahOWPguaVsOWwseaYr++8mui0puWPt+Wkh+azqCNDb29raWXlj4LmlbAjIyPmlK/ku5jlrp3lp5PlkI0j5pSv5LuY5a6d6LSm5Y+3CioKKiDlop7liqAg6Ieq5a6a5LmJ5qOA5rWL5paH56ug562J5b6F5pe26Ze077yabXlra3lkUmVhZFBvc3REZWxhee+8jOm7mOiupOWAvOaYryAxNS0yMOenkgoqIOWinuWKoCDnsr7nroDml6Xlv5fvvJpteWtreWRSZWFkUHVyZUxvZ++8jOm7mOiupOWAvOaYryB0cnVl77yI5Lmf5bCx5piv57K+566A5pel5b+X77yM5aaC5p6c6ZyA6KaB5pi+56S65a6M5pW055qE77yM6K+36K6+572u5Li6IGZhbHNl77yJCioKKiDlrprml7bov5DooYzmr4/ljYrlsI/ml7bkuIDmrKEKKiDovr7liLDmoIflh4bvvIzoh6rliqjmj5DnjrAKIiIiCgppbXBvcnQgaGFzaGxpYgppbXBvcnQganNvbgppbXBvcnQgbWF0aAppbXBvcnQgb3MKaW1wb3J0IHN5cwppbXBvcnQgdGltZQppbXBvcnQgcmVxdWVzdHMKaW1wb3J0IHJhbmRvbQppbXBvcnQgcmUKZnJvbSB1cmxsaWIucGFyc2UgaW1wb3J0IHF1b3RlLCB1cmxwYXJzZSwgcGFyc2VfcXMKaW1wb3J0IHVybGxpYjMKZnJvbSB1cmxsaWIucGFyc2UgaW1wb3J0IHBhcnNlX3FzLCB1cmxzcGxpdAoKdXJsbGliMy5kaXNhYmxlX3dhcm5pbmdzKCkKCiMg5aGrd3hwdXNoZXLnmoRhcHBUb2tlbu+8jOmFjee9ruWcqOeOr+Wig+WPmOmHj+mHjOi/meagt+ayoemFjee9rueahOi0puWPt+S8muiHquWKqOS9v+eUqOi/meS4quaOqOmAgQp3eHB1c2hlckFwcFRva2VuID0gb3MuZ2V0ZW52KCJ3eHB1c2hlckFwcFRva2VuIikgb3IgIiIKd3hwdXNoZXJUb3BpY0lkID0gb3MuZ2V0ZW52KCJ3eHB1c2hlclRvcGljSWQiKSBvciAiIgp3ZWNoYXRCdXNzaW5lc3NLZXkgPSBvcy5nZXRlbnYoIndlY2hhdEJ1c3NpbmVzc0tleSIpIG9yICIiCm15a2t5ZERldGVjdGluZ1NlYWxTdGF0dXMgPSBUcnVlCm15a2t5ZERpc2FibGVkRGV0ZWN0aW5nU2VhbFNldHRpbmcgPSBvcy5nZXRlbnYoIm15a2t5ZERpc2FibGVkRGV0ZWN0aW5nU2VhbCIpCmlmIG15a2t5ZERpc2FibGVkRGV0ZWN0aW5nU2VhbFNldHRpbmcgbm90IGluIFsiIiwgTm9uZV06CiAgICBpZiBteWtreWREaXNhYmxlZERldGVjdGluZ1NlYWxTZXR0aW5nIGluIFsiMSIsICJ0cnVlIiwgVHJ1ZV06CiAgICAgICAgbXlra3lkRGV0ZWN0aW5nU2VhbFN0YXR1cyA9IEZhbHNlCnJlYWRQb3N0RGVsYXkgPSAwCmlmIG9zLmdldGVudigibXlra3lkUmVhZFBvc3REZWxheSIpIGFuZCBvcy5nZXRlbnYoIm15a2t5ZFJlYWRQb3N0RGVsYXkiKS5pc2RlY2ltYWwoKToKICAgIHJlYWRQb3N0RGVsYXkgPSBpbnQob3MuZ2V0ZW52KCJteWtreWRSZWFkUG9zdERlbGF5IikpCm15a2t5ZFJlYWRQdXJlTG9nID0gVHJ1ZQppZiBvcy5nZXRlbnYoIm15a2t5ZFJlYWRQdXJlTG9nIik6CiAgICBteWtreWRSZWFkUHVyZUxvZyA9IG9zLmdldGVudigibXlra3lkUmVhZFB1cmVMb2ciKSA9PSAidHJ1ZSIKIyDorr7nva7ku6PnkIblnLDlnYDlkoznq6/lj6MKcHJveGllcyA9IE5vbmUKaWYgb3MuZ2V0ZW52KCJteWtreWRIdHRwUHJveHlVcmwiKToKICAgIHByb3hpZXMgPSB7CiAgICAgICAgImh0dHAiOiBvcy5nZXRlbnYoIm15a2t5ZEh0dHBQcm94eVVybCIpLAogICAgICAgICJodHRwcyI6IG9zLmdldGVudigibXlra3lkSHR0cFByb3h5VXJsIiksCiAgICB9CgoKZGVmIGV4dHJhY3RfbWlkZGxlX3RleHQoc291cmNlLCBiZWZvcmVfdGV4dCwgYWZ0ZXJfdGV4dCwgYWxsX21hdGNoZXM9RmFsc2UpOgogICAgcmVzdWx0cyA9IFtdCiAgICBzdGFydF9pbmRleCA9IHNvdXJjZS5maW5kKGJlZm9yZV90ZXh0KQoKICAgIHdoaWxlIHN0YXJ0X2luZGV4ICE9IC0xOgogICAgICAgIHNvdXJjZV9hZnRlcl9iZWZvcmVfdGV4dCA9IHNvdXJjZVtzdGFydF9pbmRleCArIGxlbihiZWZvcmVfdGV4dCkgOl0KICAgICAgICBlbmRfaW5kZXggPSBzb3VyY2VfYWZ0ZXJfYmVmb3JlX3RleHQuZmluZChhZnRlcl90ZXh0KQoKICAgICAgICBpZiBlbmRfaW5kZXggPT0gLTE6CiAgICAgICAgICAgIGJyZWFrCgogICAgICAgIHJlc3VsdHMuYXBwZW5kKHNvdXJjZV9hZnRlcl9iZWZvcmVfdGV4dFs6ZW5kX2luZGV4XSkKICAgICAgICBpZiBub3QgYWxsX21hdGNoZXM6CiAgICAgICAgICAgIGJyZWFrCgogICAgICAgIHNvdXJjZSA9IHNvdXJjZV9hZnRlcl9iZWZvcmVfdGV4dFtlbmRfaW5kZXggKyBsZW4oYWZ0ZXJfdGV4dCkgOl0KICAgICAgICBzdGFydF9pbmRleCA9IHNvdXJjZS5maW5kKGJlZm9yZV90ZXh0KQoKICAgIHJldHVybiByZXN1bHRzIGlmIGFsbF9tYXRjaGVzIGVsc2UgcmVzdWx0c1swXSBpZiByZXN1bHRzIGVsc2UgIiIKCgpkZWYgcHVzaChhcHBUb2tlbiwgdG9waWNJZHMsIHRpdGxlLCBsaW5rLCB0ZXh0LCB0eXBlKToKICAgIGRhdGFwdXN0ID0gewogICAgICAgICJhcHBUb2tlbiI6IGFwcFRva2VuLAogICAgICAgICJjb250ZW50IjogZiIiIjxib2R5IG9ubG9hZD0id2luZG93LmxvY2F0aW9uLmhyZWY9J3tsaW5rfSciPuWHuueOsOajgOa1i+aWh+eroO+8ge+8ge+8gVxuPGEgc3R5bGU9J3BhZGRpbmc6MTBweDtjb2xvcjpyZWQ7Zm9udC1zaXplOjIwcHg7JyBocmVmPSd7bGlua30nPueCueWHu+aIkeaJk+W8gOW+heajgOa1i+aWh+eroDwvYT5cbuivt+WwveW/q+eCueWHu+mTvuaOpeWujOaIkOmYheivu1xu5aSH5rOo77yae3RleHR9PC9ib2R5PiIiIiwKICAgICAgICAic3VtbWFyeSI6IHRpdGxlIG9yICLnjKvnjKvnnIvnnIvpmIXor7siLAogICAgICAgICJjb250ZW50VHlwZSI6IDIsCiAgICAgICAgInRvcGljSWRzIjogW3RvcGljSWRzIG9yICIxMTY4NiJdLAogICAgICAgICJ1cmwiOiBsaW5rLAogICAgfQogICAgIyBwcmludChkYXRhcHVzdCkKICAgIHVybHB1c3QgPSAiaHR0cDovL3d4cHVzaGVyLnpqaWVjb2RlLmNvbS9hcGkvc2VuZC9tZXNzYWdlIgogICAgdHJ5OgogICAgICAgIHAgPSByZXF1ZXN0cy5wb3N0KHVybD11cmxwdXN0LCBqc29uPWRhdGFwdXN0LCB2ZXJpZnk9RmFsc2UpCiAgICAgICAgIyBwcmludChwKQogICAgICAgIGlmIHAuanNvbigpWyJjb2RlIl0gPT0gMTAwMDoKICAgICAgICAgICAgcHJpbnQoIuKchSDmjqjpgIHmlofnq6DliLDlvq7kv6HmiJDlip/vvIzor7flsL3lv6vliY3lvoDngrnlh7vmlofnq6DvvIzkuI3nhLblsLHpu5Hlj7fllabvvIEiKQogICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KCLinYwg5o6o6YCB5paH56ug5Yiw5b6u5L+h5aSx6LSl77yM5a6M54qK5a2Q77yM6KaB6buR5Y+35LqG77yBIikKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICBleGNlcHQ6CiAgICAgICAgcHJpbnQoIuKdjCDmjqjpgIHmlofnq6DliLDlvq7kv6HlpLHotKXvvIzlrozniorlrZDvvIzopoHpu5Hlj7fkuobvvIEiKQogICAgICAgIHJldHVybiBGYWxzZQoKCmRlZiBwdXNoV2VjaGF0QnVzc2luZXNzKHJvYm90S2V5LCBsaW5rKToKICAgIGRhdGFwdXN0ID0geyJtc2d0eXBlIjogInRleHQiLCAidGV4dCI6IHsiY29udGVudCI6IGxpbmt9fQogICAgIyBwcmludChkYXRhcHVzdCkKICAgIHVybHB1c3QgPSAiaHR0cHM6Ly9xeWFwaS53ZWl4aW4ucXEuY29tL2NnaS1iaW4vd2ViaG9vay9zZW5kP2tleT0iICsgcm9ib3RLZXkKICAgIHRyeToKICAgICAgICBwID0gcmVxdWVzdHMucG9zdCh1cmw9dXJscHVzdCwganNvbj1kYXRhcHVzdCwgdmVyaWZ5PUZhbHNlKQogICAgICAgICMgcHJpbnQocCkKICAgICAgICBpZiBwLmpzb24oKVsiZXJyY29kZSJdID09IDA6CiAgICAgICAgICAgIHByaW50KCLinIUg5o6o6YCB5paH56ug5Yiw5LyB5Lia5b6u5L+h5oiQ5Yqf77yBIikKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCgi4p2MIOaOqOmAgeaWh+eroOWIsOS8geS4muW+ruS/oeWksei0pe+8gSIpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgZXhjZXB0OgogICAgICAgIHByaW50KCLinYwg5o6o6YCB5paH56ug5Yiw5LyB5Lia5b6u5L+h5aSx6LSl77yBIikKICAgICAgICByZXR1cm4gRmFsc2UKCgpkZWYgZ2V0aW5mbyhsaW5rKToKICAgIHRyeToKICAgICAgICByID0gcmVxdWVzdHMuZ2V0KGxpbmssIHZlcmlmeT1GYWxzZSkKICAgICAgICAjIHByaW50KGxpbmssIHIudGV4dCkKICAgICAgICBodG1sID0gcmUuc3ViKCJccyIsICIiLCByLnRleHQpCiAgICAgICAgYml6ID0gcmUuZmluZGFsbCgndmFyYml6PSIoLio/KSJcfFx8JywgaHRtbCkKICAgICAgICBpZiBiaXogIT0gW106CiAgICAgICAgICAgIGJpeiA9IGJpelswXQogICAgICAgIGlmIGJpeiA9PSAiIiBvciBiaXogPT0gW106CiAgICAgICAgICAgIGlmICJfX2JpeiIgaW4gbGluazoKICAgICAgICAgICAgICAgIGJpeiA9IHJlLmZpbmRhbGwoIl9fYml6PSguKj8pJiIsIGxpbmspCiAgICAgICAgICAgICAgICBpZiBiaXogIT0gW106CiAgICAgICAgICAgICAgICAgICAgYml6ID0gYml6WzBdCiAgICAgICAgbmlja25hbWUgPSByZS5maW5kYWxsKCd2YXJuaWNrbmFtZT1odG1sRGVjb2RlXCgiKC4qPykiXCk7JywgaHRtbCkKICAgICAgICBpZiBuaWNrbmFtZSAhPSBbXToKICAgICAgICAgICAgbmlja25hbWUgPSBuaWNrbmFtZVswXQogICAgICAgIHVzZXJfbmFtZSA9IHJlLmZpbmRhbGwoJ3ZhcnVzZXJfbmFtZT0iKC4qPykiOycsIGh0bWwpCiAgICAgICAgaWYgdXNlcl9uYW1lICE9IFtdOgogICAgICAgICAgICB1c2VyX25hbWUgPSB1c2VyX25hbWVbMF0KICAgICAgICBtc2dfdGl0bGUgPSByZS5maW5kYWxsKCJ2YXJtc2dfdGl0bGU9JyguKj8pJ1wuaHRtbFwoIiwgaHRtbCkKICAgICAgICBpZiBtc2dfdGl0bGUgIT0gW106CiAgICAgICAgICAgIG1zZ190aXRsZSA9IG1zZ190aXRsZVswXQogICAgICAgIHRleHQgPSBmIuWFrOS8l+WPt+WUr+S4gOagh+ivhu+8mntiaXp9fOaWh+eroDp7bXNnX3RpdGxlfXzkvZzogIU6e25pY2tuYW1lfXzotKblj7c6e3VzZXJfbmFtZX0iCiAgICAgICAgcHJpbnQodGV4dCkKICAgICAgICByZXR1cm4gbmlja25hbWUsIHVzZXJfbmFtZSwgbXNnX3RpdGxlLCB0ZXh0LCBiaXoKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAjIHByaW50KGUpCiAgICAgICAgcHJpbnQoIuKdjCDmj5Dlj5bmlofnq6Dkv6Hmga/lpLHotKUiKQogICAgICAgIHJldHVybiBGYWxzZQoKCmRlZiB0cygpOgogICAgcmV0dXJuIHN0cihpbnQodGltZS50aW1lKCkpKSArICIwMDAiCgoKY2hlY2tEaWN0ID0gewogICAgIk16a3hOVEUzTXpRNE1RPT0iOiBbIummmeWnkOeIseaXheihjCIsICJnaF81NGE2NWRjNjAwMzkiXSwKICAgICJNemc1TWpNME1ERXdOdz09IjogWyLmiJHmnKzpnZ7lh6EiLCAiZ2hfNDZiMDc2OTAzNDczIl0sCiAgICAiTXpVek9EWTROekUyT1E9PSI6IFsi5aSa6IKJ6JGh6JCEMjAyMCIsICJnaF9iM2Q3OWNkMWUxYjUiXSwKICAgICJNemt5TWpFM016WXhNZz09IjogWyJZb3VoZnVsIiwgImdoX2IzZDc5Y2QxZTFiNSJdLAogICAgIk16a3hOak13TkRJek9BPT0iOiBbIuWwkeW5tOayoeacieS5jOaJmOmCpjMiLCAiZ2hfYjNkNzljZDFlMWI1Il0sCiAgICAiTXpnM056VXhNamM1TWc9PSI6IFsi5pif5pif6K+66KiAIiwgImdoX2IzZDc5Y2QxZTFiNSJdLAogICAgIk16ZzROVGN3T0RFMU5BPT0iOiBbIuaWkemprOi/mOayoeedoTEyMyIsICJnaF9iM2Q3OWNkMWUxYjUiXSwKICAgICJNemswT0RJeE9ERTRPUT09IjogWyLmjIHlrrblppnmi5vlrp3lhbgiLCAiZ2hfYjNkNzljZDFlMWI1Il0sCiAgICAiTXpnMk5qVXlNakkxTkE9PSI6IFsiTGlsaW5uZyIsICJnaF9iM2Q3OWNkMWUxYjUiXSwKICAgICJNekl6TURjek9EZzRNdz09IjogWyLmnInmlYXkuovnmoTlkIzlraZZIiwgImdoX2IzZDc5Y2QxZTFiNSJdLAogICAgIk16ZzVPRFV5TXpZek1RPT0iOiBbIjc4OeS5n+S4jeihjCIsICJnaF9iM2Q3OWNkMWUxYjUiXSwKICAgICJNelUwTnpJNU1qYzRPUT09IjogWyLnmq7om4vnmKbogonnjKoiLCAiZ2hfNThkN2VlNTkzYjg2Il0sCiAgICAiTXpnNU1EZ3hPREF6TWc9PSI6IFsi5YyX5YyX5bCP5Yqp5omLIiwgImdoXzU4ZDdlZTU5M2I4NiJdLAogICAgIk16SXpNRGN6T0RnNE13PT0iOiBbIuacieaVheS6i+eahOWQjOWtplkiLCAiZ2hfYjhiOTI5MzRkYTVmIl0sCiAgICAiTXpreE5EVTFOREV6Tnc9PSI6IFsi54yr54yr55yL55yL5pyN5YqhIiwgImdoX2U1MGNmZWZlZjllNSJdLAp9CgoKY2xhc3MgSEhZRDoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjZyk6CiAgICAgICAgc2VsZi5Db29raWUgPSBjZ1siQ29va2llIl0KICAgICAgICBzZWxmLnR4YnogPSBjZ1sidHhieiJdCiAgICAgICAgc2VsZi50b3BpY0lkcyA9IGNnWyJ0b3BpY0lkcyJdCiAgICAgICAgc2VsZi5hcHBUb2tlbiA9IGNnWyJhcHBUb2tlbiJdCiAgICAgICAgZ2xvYmFsIHdlY2hhdEJ1c3NpbmVzc0tleQogICAgICAgIHNlbGYud2VjaGF0QnVzc2luZXNzS2V5ID0gd2VjaGF0QnVzc2luZXNzS2V5IG9yICIiCiAgICAgICAgc2VsZi5hbGlBY2NvdW50ID0gY2dbImFsaUFjY291bnQiXSBvciAiIgogICAgICAgIHNlbGYuYWxpTmFtZSA9IGNnWyJhbGlOYW1lIl0gb3IgIiIKICAgICAgICBzZWxmLm5hbWUgPSBjZ1sibmFtZSJdCiAgICAgICAgc2VsZi5kb21uYWluSG9zdCA9ICIxNjk4ODU1MTM5Lmh4aW9uZy50b3AiCiAgICAgICAgc2VsZi5yZXF1ZXN0X2lkID0gIiIKICAgICAgICBzZWxmLmhlYWRlcnMgPSB7CiAgICAgICAgICAgICJDb25uZWN0aW9uIjogImtlZXAtYWxpdmUiLAogICAgICAgICAgICAiQWNjZXB0IjogImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCwgKi8qOyBxPTAuMDEiLAogICAgICAgICAgICAiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTA3LjAuMC4wIFNhZmFyaS81MzcuMzYgTmV0VHlwZS9XSUZJIE1pY3JvTWVzc2VuZ2VyLzcuMC4yMC4xNzgxKDB4NjcwMDE0M0IpIFdpbmRvd3NXZWNoYXQoMHg2MzA5MDYyMSkgWFdFQi84MzUxIEZsdWUiLAogICAgICAgICAgICAiWC1SZXF1ZXN0ZWQtV2l0aCI6ICJYTUxIdHRwUmVxdWVzdCIsCiAgICAgICAgICAgICJSZWZlcmVyIjogZiJodHRwOi8ve3NlbGYuZG9tbmFpbkhvc3R9LyIsCiAgICAgICAgICAgICJPcmlnaW4iOiBmImh0dHA6Ly97c2VsZi5kb21uYWluSG9zdH0iLAogICAgICAgICAgICAjICJIb3N0IjogZiJ7c2VsZi5kb21uYWluSG9zdH0iLAogICAgICAgICAgICAiQWNjZXB0LUVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUiLAogICAgICAgICAgICAiQWNjZXB0LUxhbmd1YWdlIjogInpoLUNOLHpoIiwKICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLAogICAgICAgICAgICAiQ29va2llIjogc2VsZi5Db29raWUsCiAgICAgICAgfQogICAgICAgIHNlbGYuc2VjID0gcmVxdWVzdHMuc2Vzc2lvbigpCiAgICAgICAgc2VsZi5zZWMudmVyaWZ5ID0gRmFsc2UKICAgICAgICBzZWxmLnNlYy5oZWFkZXJzID0gc2VsZi5oZWFkZXJzCiAgICAgICAgc2VsZi5sYXN0Yml6ID0gIiIKICAgICAgICBzZWxmLnJlYWRKdW1wUGF0aCA9ICIiCiAgICAgICAgc2VsZi5yZXRyeVJlYWRpbmcgPSBGYWxzZQoKICAgIGRlZiB1c2VyX2luZm8oc2VsZik6CiAgICAgICAgdSA9IGYiaHR0cDovL3tzZWxmLmRvbW5haW5Ib3N0fS9oYW9iYW9iYW8vdXNlciIKICAgICAgICByID0gIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIHIgPSBzZWxmLnNlYy5nZXQodSkKICAgICAgICAgICAgcmogPSByLmpzb24oKQogICAgICAgICAgICBpZiByai5nZXQoImVycmNvZGUiKSA9PSAwOgogICAgICAgICAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1d6I635Y+W5L+h5oGv5oiQ5Yqf77yM55So5oi3SUTkuLoge3IuanNvbigpWydkYXRhJ11bJ3VzZXJpZCddfSIpCiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1d6I635Y+W55So5oi35L+h5oGv5aSx6LSl77yM6LSm5Y+35byC5bi4IOaIluiAhSBDb29raWXml6DmlYjvvIzor7fmo4DmtYtDb29raWXmmK/lkKbmraPnoa4iKQogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwcmludChyLnRleHQpCiAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9XeiOt+WPlueUqOaIt+S/oeaBr+Wksei0pSxDb29raWXml6DmlYjvvIzor7fmo4DmtYtDb29raWXmmK/lkKbmraPnoa4iKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgZ29sZChzZWxmKToKICAgICAgICByID0gIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIHUgPSBmImh0dHA6Ly97c2VsZi5kb21uYWluSG9zdH0vaGFvYmFvYmFvL3dvcmtpbmZvIgogICAgICAgICAgICByID0gc2VsZi5zZWMuZ2V0KHUpCiAgICAgICAgICAgICMgcHJpbnQoci5qc29uKCkpCiAgICAgICAgICAgIHJqID0gci5qc29uKCkKICAgICAgICAgICAgc2VsZi5yZW1haW5fZ29sZCA9IG1hdGguZmxvb3IoaW50KHJqLmdldCgiZGF0YSIpLmdldCgicmVtYWluX2dvbGQiKSkpCiAgICAgICAgICAgIHNlbGYucmVtYWluID0gZmxvYXQocmouZ2V0KCJkYXRhIikuZ2V0KCJyZW1haW4iKSkKICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICBmJ+S7iuaXpeW3sue7j+mYheivu+S6hntyai5nZXQoImRhdGEiKS5nZXQoImRheXJlYWRzIil956+H5paH56ugIOW9k+WJjemHkeW4gXtyai5nZXQoImRhdGEiKS5nZXQoInJlbWFpbl9nb2xkIil9IOW9k+WJjeS9meminXtzZWxmLnJlbWFpbn0nCiAgICAgICAgICAgICkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9XeiOt+WPlumHkeW4geWksei0pSIpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBnZXRLZXkoc2VsZik6CiAgICAgICAgdWsgPSAiIgogICAgICAgIHVrUmVzID0gTm9uZQogICAgICAgIGZvciBpIGluIHJhbmdlKDEwKToKICAgICAgICAgICAgdSA9IGYiaHR0cDovL3tzZWxmLmRvbW5haW5Ib3N0fXtzZWxmLnJlYWRKdW1wUGF0aH0iCiAgICAgICAgICAgICMgcHJpbnQoIuaPkOekuiBnZXRLZXnvvJoiLCB1KQogICAgICAgICAgICBwID0gZiIiCiAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5wb3N0KHUsIGhlYWRlcnM9c2VsZi5oZWFkZXJzLCBkYXRhPXAsIHZlcmlmeT1GYWxzZSkKICAgICAgICAgICAgIyBwcmludCgiZ2V0S2V577yaIiwgci50ZXh0KQogICAgICAgICAgICByaiA9IHIuanNvbigpCiAgICAgICAgICAgIGRvbWFpbiA9IHJqLmdldCgiZGF0YSIpLmdldCgiZG9tYWluIikKICAgICAgICAgICAgIyBwcmludCgi6K+35rGC5Lit6L2s6aG177yaIiwgci50ZXh0KQogICAgICAgICAgICBwcCA9IHBhcnNlX3FzKHVybHBhcnNlKGRvbWFpbikucXVlcnkpCiAgICAgICAgICAgIGhuID0gdXJscGFyc2UoZG9tYWluKS5uZXRsb2MKICAgICAgICAgICAgdWsgPSBwcC5nZXQoInVrIilbMF0KICAgICAgICAgICAgdWtSZXMgPSByLnRleHQKICAgICAgICAgICAgaWYgdWs6CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgIGlmIHVrID09ICIiOgogICAgICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV3ojrflj5Z1a+Wksei0pe+8jOi/lOWbnumUmeivr++8mnt1a1Jlc30iKQogICAgICAgICAgICByZXR1cm4KICAgICAgICB0aW1lLnNsZWVwKDgpCiAgICAgICAgciA9IHJlcXVlc3RzLmdldCgKICAgICAgICAgICAgZG9tYWluLAogICAgICAgICAgICBoZWFkZXJzPXsKICAgICAgICAgICAgICAgICJBY2NlcHQiOiAidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45IiwKICAgICAgICAgICAgICAgICJBY2NlcHQtRW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSwgYnIiLAogICAgICAgICAgICAgICAgIkFjY2VwdC1MYW5ndWFnZSI6ICJ6aC1DTix6aDtxPTAuOSIsCiAgICAgICAgICAgICAgICAiQ29ubmVjdGlvbiI6ICJrZWVwLWFsaXZlIiwKICAgICAgICAgICAgICAgICJIb3N0IjogZiJ7aG59IiwKICAgICAgICAgICAgICAgICJTZWMtRmV0Y2gtRGVzdCI6ICJkb2N1bWVudCIsCiAgICAgICAgICAgICAgICAiU2VjLUZldGNoLU1vZGUiOiAibmF2aWdhdGUiLAogICAgICAgICAgICAgICAgIlNlYy1GZXRjaC1TaXRlIjogIm5vbmUiLAogICAgICAgICAgICAgICAgIlNlYy1GZXRjaC1Vc2VyIjogIj8xIiwKICAgICAgICAgICAgICAgICJVcGdyYWRlLUluc2VjdXJlLVJlcXVlc3RzIjogIjEiLAogICAgICAgICAgICAgICAgIlVzZXItQWdlbnQiOiAiTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEwNy4wLjAuMCBTYWZhcmkvNTM3LjM2IE5ldFR5cGUvV0lGSSBNaWNyb01lc3Nlbmdlci83LjAuMjAuMTc4MSgweDY3MDAxNDNCKSBXaW5kb3dzV2VjaGF0KDB4NjMwOTA3MWQpIFhXRUIvODQ2MSBGbHVlIiwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdmVyaWZ5PUZhbHNlLAogICAgICAgICkKICAgICAgICAjIDxzY3JpcHQgc3JjPSJodHRwczovL2ltYWdlLmh6eXNteXkuY24veXVuc2FvbWEvbmV3cHJvamVjdC9qcy9hcnRpY2xlLmpzP3Y0LjAiPjwvc2NyaXB0PgogICAgICAgIHJlYWRKc1ZlcnNpb24gPSBleHRyYWN0X21pZGRsZV90ZXh0KHIudGV4dCwgImpzL2FydGljbGUuanM/IiwgJyInKQogICAgICAgIGlmIHJlYWRKc1ZlcnNpb24gIT0gInY2LjAiOgogICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgIGYi6LSm5Y+3W3tzZWxmLm5hbWV9XSDmo4DmtYvliLDmjqXlj6PniYjmnKzlj5HnlJ/lj5jljJbvvIzlvZPliY3mjqXlj6PniYjmnKzkuLrvvJp7cmVhZEpzVmVyc2lvbn3vvIzmi4nlk43orabmiqXvvIzlj7DlrZDmkJ7kuovvvIzopoHmipPkurrkuobvvIzlvIDlp4vmkqTpgIDvvIzpgIDlh7rnqIvluo8gPj4gIgogICAgICAgICAgICApCiAgICAgICAgICAgIHN5cy5leGl0KDApCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV0g6ZiF6K+75YeG5aSH5a6M5oiQ77yae3Vrfe+8jOaPkOWPluWIsOeahOWcsOWdgO+8mntkb21haW59IikKICAgICAgICAgICAgaWYgbXlra3lkUmVhZFB1cmVMb2cgPT0gRmFsc2U6CiAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICBmIui0puWPt1t7c2VsZi5uYW1lfV0g6ZiF6K+75YeG5aSH5oiQ5Yqf77yM5b2T5YmN5o6l5Y+j54mI5pys5Li677yae3JlYWRKc1ZlcnNpb259IOWNs+WwhuW8gOWni+mYheivuyDinIUg77yM6ZiF6K+75Y+C5pWw5Li677yae3VrfSIKICAgICAgICAgICAgICAgICkKICAgICAgICBoID0gewogICAgICAgICAgICAiQWNjZXB0IjogImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCwgKi8qOyBxPTAuMDEiLAogICAgICAgICAgICAiQWNjZXB0LUVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUsIGJyIiwKICAgICAgICAgICAgIkFjY2VwdC1MYW5ndWFnZSI6ICJ6aC1DTix6aDtxPTAuOSIsCiAgICAgICAgICAgICJDb25uZWN0aW9uIjogImtlZXAtYWxpdmUiLAogICAgICAgICAgICAiSG9zdCI6IGhuLAogICAgICAgICAgICAiT3JpZ2luIjogZiJodHRwczovL3tobn0iLAogICAgICAgICAgICAiU2VjLUZldGNoLURlc3QiOiAiZW1wdHkiLAogICAgICAgICAgICAiU2VjLUZldGNoLU1vZGUiOiAiY29ycyIsCiAgICAgICAgICAgICJTZWMtRmV0Y2gtU2l0ZSI6ICJjcm9zcy1zaXRlIiwKICAgICAgICAgICAgIlVzZXItQWdlbnQiOiAiTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEwNy4wLjAuMCBTYWZhcmkvNTM3LjM2IE5ldFR5cGUvV0lGSSBNaWNyb01lc3Nlbmdlci83LjAuMjAuMTc4MSgweDY3MDAxNDNCKSBXaW5kb3dzV2VjaGF0KDB4NjMwOTA3MWQpIFhXRUIvODQ2MSBGbHVlIiwKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHVrLCBoCgogICAgZGVmIHJlYWQoc2VsZik6CiAgICAgICAgaW5mbyA9IHNlbGYuZ2V0S2V5KCkKICAgICAgICBpZiBsZW4oaW5mbykgPT0gMDoKICAgICAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1d6I635Y+W6ZiF6K+75Y+C5pWw5aSx6LSl77yM5YGc5q2i5b6A5ZCO6ZiF6K+777yB4pqg77iPICIpCiAgICAgICAgICAgIHJldHVybgogICAgICAgICMgcHJpbnQoaW5mbykKICAgICAgICB0aW1lLnNsZWVwKDIpCiAgICAgICAgYXJjdGlsZVRpbWUgPSAxCiAgICAgICAgc2VsZi5yZXRyeVJlYWRpbmcgPSBGYWxzZQogICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgIHJlcyA9IHsiZXJyY29kZSI6IC0xfQogICAgICAgICAgICAjIHJhd1JlcyA9ICIiCiAgICAgICAgICAgIHJlZnJlc2hUaW1lID0gMAogICAgICAgICAgICB3aGlsZSByZXNbImVycmNvZGUiXSAhPSAwOgogICAgICAgICAgICAgICAgc2VsZi5yZXRyeVJlYWRpbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgdGltZVN0YW1wID0gc3RyKHRzKCkpCiAgICAgICAgICAgICAgICBteXNpZ24gPSBoYXNobGliLm1kNSgKICAgICAgICAgICAgICAgICAgICAoaW5mb1sxXVsiSG9zdCJdICsgdGltZVN0YW1wICsgIkxqKj9RMyNwT3ZpVyIpLmVuY29kZSgpCiAgICAgICAgICAgICAgICApLmhleGRpZ2VzdCgpCiAgICAgICAgICAgICAgICBzZWxmLnBhcmFtcyA9IHsKICAgICAgICAgICAgICAgICAgICAidWsiOiBpbmZvWzBdLAogICAgICAgICAgICAgICAgICAgICJ0aW1lIjogdGltZVN0YW1wLAogICAgICAgICAgICAgICAgICAgICJteXNpZ24iOiBteXNpZ24sCiAgICAgICAgICAgICAgICAgICAgInYiOiAiNC4wIiwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHUgPSBmImh0dHBzOi8vbnNyLnpzZjIwMjNlNDU4LmNsb3VkL2hhb2Jhb2Jhby9ta3dlbnpoYW5ncyIKICAgICAgICAgICAgICAgICMgcHJpbnQoCiAgICAgICAgICAgICAgICAjICAgICAi6ZiF6K+75paH56ug5Y+C5pWw5p+l55yL77yaIiwKICAgICAgICAgICAgICAgICMgICAgIHUsCiAgICAgICAgICAgICAgICAjICAgICBzZWxmLnBhcmFtcywKICAgICAgICAgICAgICAgICMgICAgIGluZm8sCiAgICAgICAgICAgICAgICAjICAgICBpbmZvWzFdWyJPcmlnaW4iXS5yZXBsYWNlKCJodHRwczovLyIsICIiKS5yZXBsYWNlKCIvIiwgIiIpLAogICAgICAgICAgICAgICAgIyApCiAgICAgICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KAogICAgICAgICAgICAgICAgICAgIHUsCiAgICAgICAgICAgICAgICAgICAgaGVhZGVycz1pbmZvWzFdLAogICAgICAgICAgICAgICAgICAgIHBhcmFtcz1zZWxmLnBhcmFtcywKICAgICAgICAgICAgICAgICAgICB2ZXJpZnk9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgdGltZW91dD02MCwKICAgICAgICAgICAgICAgICAgICBwcm94aWVzPXByb3hpZXMsCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBwcmludCgiLSIgKiA1MCkKICAgICAgICAgICAgICAgICMgaWYgbXlra3lkUmVhZFB1cmVMb2cgPT0gRmFsc2U6CiAgICAgICAgICAgICAgICAjICAgICBwcmludCgKICAgICAgICAgICAgICAgICMgICAgZiLotKblj7dbe3NlbGYubmFtZX1d56ysW3tyZWZyZXNoVGltZSsxfV3mrKHojrflj5bpmIXor7vmlofnq6Bbe2luZm9bMF19XeebrueahOmhte+8mntyLnRleHR9IgogICAgICAgICAgICAgICAgIyApCiAgICAgICAgICAgICAgICAjIHJhd1JlcyA9IHIudGV4dAogICAgICAgICAgICAgICAgIyBwcmludCgi6I635Y+W5paH56ug6ZiF6K+76ZO+5o6l77yaIiwgdSwgaW5mb1sxXSwgci50ZXh0KQogICAgICAgICAgICAgICAgaWYgci50ZXh0IGFuZCByLmpzb24oKVsiZXJyY29kZSJdID09IDA6CiAgICAgICAgICAgICAgICAgICAgcmVzID0gci5qc29uKCkKICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgZiLotKblj7dbe3NlbGYubmFtZX1d56ysW3tyZWZyZXNoVGltZSsxfV3mrKHojrflj5bnrKxbe2FyY3RpbGVUaW1lfV3nr4fpmIXor7vmlofnq6Bbe2luZm9bMF19Xei3s+i9rOmTvuaOpeaIkOWKnyIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGRlY29kZWRfc3RyID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgICAgICAgICAgICAgaWYgZGVjb2RlZF9zdHJbIm1zZyJdOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYi6LSm5Y+3W3tzZWxmLm5hbWV9XeesrFt7cmVmcmVzaFRpbWUrMX1d5qyh6I635Y+W56ysW3thcmN0aWxlVGltZX1d56+H6ZiF6K+75paH56ugW3tpbmZvWzBdfV3ot7Povazpk77mjqXlpLHotKXvvJp7ZGVjb2RlZF9zdHJbJ21zZyddfSIKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYi6LSm5Y+3W3tzZWxmLm5hbWV9XeesrFt7cmVmcmVzaFRpbWUrMX1d5qyh6I635Y+W56ysW3thcmN0aWxlVGltZX1d56+H6ZiF6K+75paH56ugW3tpbmZvWzBdfV3ot7Povazpk77mjqXlpLHotKXvvJp7ci50ZXh0fSIKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxLjUpCiAgICAgICAgICAgICAgICByZWZyZXNoVGltZSA9IHJlZnJlc2hUaW1lICsgMQogICAgICAgICAgICAgICAgaWYgcmVmcmVzaFRpbWUgPj0gNToKICAgICAgICAgICAgICAgICAgICBwcmludChmIuKaoO+4jyDotKblj7dbe3NlbGYubmFtZX1d6I635Y+W6ZiF6K+756ysW3thcmN0aWxlVGltZX1d56+H5paH56ugW3tpbmZvWzBdfV3otoXml7bigKbigKYiKQogICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB3ZWNoYXRQb3N0TGluayA9ICIiCiAgICAgICAgICAgIGlmIHJlcy5nZXQoImVycmNvZGUiKSA9PSAwOgogICAgICAgICAgICAgICAgcmV0dXJuTGluayA9ICIiCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuTGluayA9IHJlcy5nZXQoImRhdGEiKS5nZXQoImxpbmsiKQogICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgICAgIGVycm9yTXNnID0gcmVzLmdldCgiZGF0YSIpCiAgICAgICAgICAgICAgICAgICAgIyBwcmludCgiMeaKpemUme+8miIsIGUpCiAgICAgICAgICAgICAgICAgICAgIyBwcmludCgiMei/lOWbnu+8miIsIHJhd1JlcykKICAgICAgICAgICAgICAgICAgICBpZiAiNDA0IE5vdCBGb3VuZCIgaW4gZXJyb3JNc2c6CiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTXNnID0gIuWPsOWtkOaOpeWPo+S4jeihjO+8jOW0qeS6hn4iCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucmV0cnlSZWFkaW5nID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYi4pqg77iPIOi0puWPt1t7c2VsZi5uYW1lfV3ojrflj5bpmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6Bbe2luZm9bMF19XemTvuaOpeWksei0pe+8jOeWkeS8vOWPsOWtkOaOpeWPo+WkquWeg+Wcvu+8jOW0qeS6hu+8jOi/lOWbnuaVsOaNruS4uu+8miIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvck1zZywKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICAgICBmIuKaoO+4jyDotKblj7dbe3NlbGYubmFtZX1d6I635Y+W6ZiF6K+756ysW3thcmN0aWxlVGltZX1d56+H5paH56ugW3tpbmZvWzBdfV3pk77mjqXlpLHotKXvvIznlpHkvLzlj7DlrZDmjqXlj6PlpKrlnoPlnL7vvIzltKnkuobvvIzov5Tlm57mlbDmja7kuLrvvJoiLAogICAgICAgICAgICAgICAgICAgICAgICBlcnJvck1zZywKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIGlmICJtcC53ZWl4aW4ucXEuY29tIiBpbiByZXR1cm5MaW5rOgogICAgICAgICAgICAgICAgICAgIGlmIG15a2t5ZFJlYWRQdXJlTG9nID09IEZhbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV0g6ZiF6K+756ysW3thcmN0aWxlVGltZX1d56+H5b6u5L+h5paH56ug77yae3JldHVybkxpbmt9IikKICAgICAgICAgICAgICAgICAgICB3ZWNoYXRQb3N0TGluayA9IHJldHVybkxpbmsKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgIyBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV0g6ZiF6K+756ysW3thcmN0aWxlVGltZX1d56+H5paH56ug5YeG5aSH6Lez6L2s77yae2xpbmt9IikKICAgICAgICAgICAgICAgICAgICB3ZWNoYXRQb3N0TGluayA9IHNlbGYuanVtcChyZXR1cm5MaW5rKQogICAgICAgICAgICAgICAgICAgIGlmIG15a2t5ZFJlYWRQdXJlTG9nID09IEZhbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYi6LSm5Y+3W3tzZWxmLm5hbWV9XSDpmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4flvq7kv6Hmlofnq6DvvJp7d2VjaGF0UG9zdExpbmt9IgogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBpZiBteWtreWRSZWFkUHVyZUxvZyA9PSBGYWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV0g6ZiF6K+756ysW3thcmN0aWxlVGltZX1d56+H5paH56ug77yae3dlY2hhdFBvc3RMaW5rfSIpCiAgICAgICAgICAgICAgICBwb3N0SW5mbyA9IGdldGluZm8od2VjaGF0UG9zdExpbmspCiAgICAgICAgICAgICAgICBpZiBwb3N0SW5mbyA9PSBGYWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgZiLimqDvuI8g6LSm5Y+3W3tzZWxmLm5hbWV9XeWboCDojrflj5blhazkvJflj7fmlofnq6Dkv6Hmga/kuI3miJDlip/vvIzlr7zoh7TpmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6Bbe2luZm9bMF19XSDlpLHotKXigKbigKYiCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgICAgICAgICAgc2xlZXBUaW1lID0gcmFuZG9tLnJhbmRpbnQoNywgMTApCiAgICAgICAgICAgICAgICAjIOWmguaenOaYr+ajgOa1i+eJueW+geWIsOeahOaWh+eroCDmiJbogIUg5ZCO5LiA56+H5paH56ug5LiO5YmN5LiA56+H55u45Ly8CiAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgY2hlY2tEaWN0LmdldChwb3N0SW5mb1s0XSkgIT0gTm9uZQogICAgICAgICAgICAgICAgICAgIG9yIChyZXMuZ2V0KCJkYXRhIikuZ2V0KCJhIikgPT0gMikKICAgICAgICAgICAgICAgICAgICBvciAoIiZjaGtzbT0iIGluIHdlY2hhdFBvc3RMaW5rKQogICAgICAgICAgICAgICAgKToKICAgICAgICAgICAgICAgICAgICBzbGVlcFRpbWUgPSByZWFkUG9zdERlbGF5IG9yIHJhbmRvbS5yYW5kaW50KDE1LCAyMCkKICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgZiLimqDvuI8g6LSm5Y+3W3tzZWxmLm5hbWV9XemYheivu+esrFt7YXJjdGlsZVRpbWV9Xeevh+aWh+eroFt7aW5mb1swXX1dIOajgOa1i+WIsOeWkeS8vOajgOa1i+aWh+eroO+8jOato+WcqOaOqOmAge+8jOetieW+hei/h+ajgOa1i++8jOetieW+heaXtumXtO+8mntzbGVlcFRpbWV956eS44CC44CC44CCIgogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLndlY2hhdEJ1c3NpbmVzc0tleToKICAgICAgICAgICAgICAgICAgICAgICAgcHVzaFdlY2hhdEJ1c3NpbmVzcyhzZWxmLndlY2hhdEJ1c3NpbmVzc0tleSwgd2VjaGF0UG9zdExpbmspCiAgICAgICAgICAgICAgICAgICAgZWxpZiBzZWxmLmFwcFRva2VuOgogICAgICAgICAgICAgICAgICAgICAgICBwdXNoKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hcHBUb2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudG9waWNJZHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAi54yr54yr55yL55yL6ZiF6K+76L+H5qOA5rWLIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlY2hhdFBvc3RMaW5rLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZiLotKblj7dbe3NlbGYubmFtZX1d6ZiF6K+756ysW3thcmN0aWxlVGltZX1d56+H5paH56ugW3tpbmZvWzBdfV0g5q2j5Zyo562J5b6F6L+H5qOA5rWL77yM562J5b6F5pe26Ze077yae3NsZWVwVGltZX3np5JcbuW5u+eUn+aPkOekuu+8muW/q+eCue+8jOWIq+iAveaQgeaXtumXtOS6hu+8gSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAibXlra3lkIiwKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZiLimqDvuI8g6LSm5Y+3W3tzZWxmLm5hbWV9XemYheivu+esrFt7YXJjdGlsZVRpbWV9Xeevh+aWh+eroFt7aW5mb1swXX1dIOmcgOimgei/h+ajgOa1i++8jOS9huaYr+acqumFjee9ruaOqOmAgXRva2Vu77yM5Li65LqG6YG/5YWN6buR5Y+377yM5YGc5q2i6ZiF6K+744CC44CC44CCIgogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgZiLinIUg6LSm5Y+3W3tzZWxmLm5hbWV9XemYheivu+esrFt7YXJjdGlsZVRpbWV9Xeevh+aWh+eroFt7aW5mb1swXX1dIOmdnuajgOa1i+aWh+eroO+8jOaooeaLn+ivu3tzbGVlcFRpbWV956eSIgogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIHNlbGYubGFzdGJpeiA9IHBvc3RJbmZvWzRdCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKHNsZWVwVGltZSkKICAgICAgICAgICAgICAgIHUxID0gZiJodHRwczovL25zci56c2YyMDIzZTQ1OC5jbG91ZC9oYW9iYW9iYW8vYWRkZ29sZHMyP3RpbWU9e3NsZWVwVGltZX0mdWs9e2luZm9bMF19JnBzaWduPXtteXNpZ259IgogICAgICAgICAgICAgICAgcjEgPSByZXF1ZXN0cy5nZXQodTEsIGhlYWRlcnM9aW5mb1sxXSwgdmVyaWZ5PUZhbHNlKQogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICMgcHJpbnQoIuWinuWKoOmHkeW4ge+8miIsIHUxLCBpbmZvWzFdLCByMS50ZXh0KQogICAgICAgICAgICAgICAgICAgIGlmIHIxLnRleHQgYW5kIHIxLmpzb24oKToKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiLinIUg6LSm5Y+3W3tzZWxmLm5hbWV9XSDpmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6Bbe2luZm9bMF19XeaJgOW+l+mHkeW4ge+8mntyMS5qc29uKClbJ2RhdGEnXVsnZ29sZCddfeS4qu+8jOi0puaIt+W9k+WJjemHkeW4ge+8mntyMS5qc29uKClbJ2RhdGEnXVsnbGFzdF9nb2xkJ1195Liq77yM5LuK5pel5bey6K+777yae3IxLmpzb24oKVsnZGF0YSddWydkYXlfcmVhZCddfeasoe+8jOS7iuaXpeacquivuyB7cjEuanNvbigpWydkYXRhJ11bJ3JlbWFpbl9yZWFkJ11956+H5paH56ugIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmIuKdjCDotKblj7dbe3NlbGYubmFtZX1dIOmYheivu+esrFt7YXJjdGlsZVRpbWV9Xeevh+aWh+eroFt7aW5mb1swXX1d5byC5bi477yae3IxLmpzb24oKS5nZXQoJ21zZycpfSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICLmnKzmrKHpmIXor7vml6DmlYgiIGluIHIxLmpzb24oKS5nZXQoIm1zZyIpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmIuKdjCDotKblj7dbe3NlbGYubmFtZX1dIOmYheivu+esrFt7YXJjdGlsZVRpbWV9Xeevh+aWh+eroFt7aW5mb1swXX1d5aSx6LSl77yae3IxLnRleHR9IgogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgIyBwcmludCgiMuaKpemUme+8miIsIGUpCiAgICAgICAgICAgICAgICAgICAgIyBwcmludCgiMui/lOWbnu+8miIsIHIxLnRleHQpCiAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2cgPSByMS50ZXh0CiAgICAgICAgICAgICAgICAgICAgaWYgIjQwNCBOb3QgRm91bmQiIGluIGVycm9yTXNnOgogICAgICAgICAgICAgICAgICAgICAgICBlcnJvck1zZyA9ICLlj7DlrZDmjqXlj6PkuI3ooYzvvIzltKnkuoZ+IgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnJldHJ5UmVhZGluZyA9IFRydWUKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmIuKaoO+4jyDotKblj7dbe3NlbGYubmFtZX1dIOmYheivu+esrFt7YXJjdGlsZVRpbWV9Xeevh+aWh+eroFt7aW5mb1swXX1d5byC5bi477yM6L+U5Zue5pWw5o2u5Li677yaIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTXNnLAogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIGYi4pqg77iPIOi0puWPt1t7c2VsZi5uYW1lfV0g6ZiF6K+756ysW3thcmN0aWxlVGltZX1d56+H5paH56ugW3tpbmZvWzBdfV3lvILluLjvvIzov5Tlm57mlbDmja7kuLrvvJoiLAogICAgICAgICAgICAgICAgICAgICAgICBlcnJvck1zZywKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgZWxpZiByZXMuZ2V0KCJlcnJjb2RlIikgPT0gNDA1OgogICAgICAgICAgICAgICAgcHJpbnQoZiLimqDvuI8g6LSm5Y+3W3tzZWxmLm5hbWV9XSDpmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6Bbe2luZm9bMF19XemYheivu+mHjeWkjSIpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEuNSkKICAgICAgICAgICAgZWxpZiByZXMuZ2V0KCJlcnJjb2RlIikgPT0gNDA3OgogICAgICAgICAgICAgICAgcHJpbnQoZiLimqDvuI8g6LSm5Y+3W3tzZWxmLm5hbWV9XSDpmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6Bbe2luZm9bMF19XemYheivu+e7k+adnyIpCiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHJpbnQoZiLimqDvuI8g6LSm5Y+3W3tzZWxmLm5hbWV9XSDpmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6Bbe2luZm9bMF19XeacquefpeaDheWGtSIpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEuNSkKICAgICAgICAgICAgYXJjdGlsZVRpbWUgPSBhcmN0aWxlVGltZSArIDEKCiAgICBkZWYganVtcChzZWxmLCBsaW5rKToKICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV3lvIDlp4vmnKzmrKHpmIXor7vigKbigKYiKQogICAgICAgIGhuID0gdXJscGFyc2UobGluaykubmV0bG9jCiAgICAgICAgaCA9IHsKICAgICAgICAgICAgIkhvc3QiOiBobiwKICAgICAgICAgICAgIkNvbm5lY3Rpb24iOiAia2VlcC1hbGl2ZSIsCiAgICAgICAgICAgICJVcGdyYWRlLUluc2VjdXJlLVJlcXVlc3RzIjogIjEiLAogICAgICAgICAgICAiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTA3LjAuMC4wIFNhZmFyaS81MzcuMzYgTmV0VHlwZS9XSUZJIE1pY3JvTWVzc2VuZ2VyLzcuMC4yMC4xNzgxKDB4NjcwMDE0M0IpIFdpbmRvd3NXZWNoYXQoMHg2MzA5MDYyMSkgWFdFQi84MzUxIEZsdWUiLAogICAgICAgICAgICAiQWNjZXB0IjogInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOSIsCiAgICAgICAgICAgICJBY2NlcHQtRW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSIsCiAgICAgICAgICAgICJBY2NlcHQtTGFuZ3VhZ2UiOiAiemgtQ04semgiLAogICAgICAgICAgICAiQ29va2llIjogc2VsZi5Db29raWUsCiAgICAgICAgfQogICAgICAgIHIgPSByZXF1ZXN0cy5nZXQobGluaywgaGVhZGVycz1oLCBhbGxvd19yZWRpcmVjdHM9RmFsc2UsIHZlcmlmeT1GYWxzZSkKICAgICAgICAjIHByaW50KHIuc3RhdHVzX2NvZGUpCiAgICAgICAgTG9jYXRpb24gPSByLmhlYWRlcnMuZ2V0KCJMb2NhdGlvbiIpCiAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1d5byA5aeL6ZiF6K+75paH56ugIC0ge0xvY2F0aW9ufSIpCiAgICAgICAgcmV0dXJuIExvY2F0aW9uCgogICAgZGVmIHdpdGhkcmF3UG9zdChzZWxmKToKICAgICAgICB1ID0gZiJodHRwOi8ve3NlbGYuZG9tbmFpbkhvc3R9L2hhb2Jhb2Jhby9nZXR3aXRoZHJhdyIKICAgICAgICBwID0gZiJzaWduaWQ9e3NlbGYucmVxdWVzdF9pZH0mdWE9MCZwdHlwZT0wJnBhY2NvdW50PSZwbmFtZT0iCiAgICAgICAgaWYgc2VsZi5hbGlBY2NvdW50IGFuZCBzZWxmLmFsaU5hbWU6CiAgICAgICAgICAgIHAgPSBmInNpZ25pZD17c2VsZi5yZXF1ZXN0X2lkfSZ1YT0yJnB0eXBlPTEmcGFjY291bnQ9e3F1b3RlKHNlbGYuYWxpQWNjb3VudCl9JnBuYW1lPXtxdW90ZShzZWxmLmFsaU5hbWUpfSIKICAgICAgICByID0gcmVxdWVzdHMucG9zdCgKICAgICAgICAgICAgdSwKICAgICAgICAgICAgaGVhZGVycz17CiAgICAgICAgICAgICAgICAiQWNjZXB0IjogImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCwgKi8qOyBxPTAuMDEiLAogICAgICAgICAgICAgICAgIkFjY2VwdC1FbmNvZGluZyI6ICJnemlwLCBkZWZsYXRlIiwKICAgICAgICAgICAgICAgICJBY2NlcHQtTGFuZ3VhZ2UiOiAiemgtQ04semg7cT0wLjkiLAogICAgICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLAogICAgICAgICAgICAgICAgIkNvb2tpZSI6IHNlbGYuQ29va2llLAogICAgICAgICAgICAgICAgIkhvc3QiOiBmIntzZWxmLmRvbW5haW5Ib3N0fSIsCiAgICAgICAgICAgICAgICAiT3JpZ2luIjogZiJodHRwOi8ve3NlbGYuZG9tbmFpbkhvc3R9IiwKICAgICAgICAgICAgICAgICJQcm94eS1Db25uZWN0aW9uIjogImtlZXAtYWxpdmUiLAogICAgICAgICAgICAgICAgIlJlZmVyZXIiOiBmImh0dHA6Ly97c2VsZi5kb21uYWluSG9zdH0vaGFvYmFvYmFvL3dpdGhkcmF3IiwKICAgICAgICAgICAgICAgICJYLVJlcXVlc3RlZC1XaXRoIjogIlhNTEh0dHBSZXF1ZXN0IiwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGF0YT1wLAogICAgICAgICAgICB2ZXJpZnk9RmFsc2UsCiAgICAgICAgKQogICAgICAgIHByaW50KGYi4pyFIOi0puWPt1t7c2VsZi5uYW1lfV0g5o+Q546w57uT5p6c77yaIiwgci5qc29uKClbIm1zZyJdKQoKICAgIGRlZiB3aXRoZHJhdyhzZWxmKToKICAgICAgICBnb2xkID0gaW50KGludChzZWxmLnJlbWFpbl9nb2xkKSAvIDEwMDApICogMTAwMAogICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9XSDmnKzmrKHmj5DnjrDph5Hpop0gIiwgc2VsZi5yZW1haW4sICLlhYMgIiwgZ29sZCwgIumHkeW4gSIpCiAgICAgICAgd2l0aGRyYXdCYWxhbmNlID0gcm91bmQoKGludChzZWxmLnR4YnopIC8gMTAwMDApLCAzKQogICAgICAgIGlmIGdvbGQgb3IgKHNlbGYucmVtYWluID49IHdpdGhkcmF3QmFsYW5jZSk6CiAgICAgICAgICAgIGlmIGdvbGQ6CiAgICAgICAgICAgICAgICAjIOW8gOWni+aPkOeOsAogICAgICAgICAgICAgICAgdTEgPSBmImh0dHA6Ly97c2VsZi5kb21uYWluSG9zdH0vaGFvYmFvYmFvL2dldGdvbGQiCiAgICAgICAgICAgICAgICBwMSA9IGYicmVxdWVzdF9pZD17c2VsZi5yZXF1ZXN0X2lkfSZnb2xkPXtnb2xkfSIKICAgICAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5wb3N0KAogICAgICAgICAgICAgICAgICAgIHUxLAogICAgICAgICAgICAgICAgICAgIGRhdGE9cDEsCiAgICAgICAgICAgICAgICAgICAgaGVhZGVycz17CiAgICAgICAgICAgICAgICAgICAgICAgICJBY2NlcHQiOiAiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0LCAqLyo7IHE9MC4wMSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJBY2NlcHQtRW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJBY2NlcHQtTGFuZ3VhZ2UiOiAiemgtQ04semg7cT0wLjkiLAogICAgICAgICAgICAgICAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJDb29raWUiOiBzZWxmLkNvb2tpZSwKICAgICAgICAgICAgICAgICAgICAgICAgIkhvc3QiOiBmIntzZWxmLmRvbW5haW5Ib3N0fSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJPcmlnaW4iOiBmImh0dHA6Ly97c2VsZi5kb21uYWluSG9zdH0iLAogICAgICAgICAgICAgICAgICAgICAgICAiUHJveHktQ29ubmVjdGlvbiI6ICJrZWVwLWFsaXZlIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlJlZmVyZXIiOiBmImh0dHA6Ly97c2VsZi5kb21uYWluSG9zdH0vaGFvYmFvYmFvL3dpdGhkcmF3IiwKICAgICAgICAgICAgICAgICAgICAgICAgIlVzZXItQWdlbnQiOiAiTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEwNy4wLjAuMCBTYWZhcmkvNTM3LjM2IE5ldFR5cGUvV0lGSSBNaWNyb01lc3Nlbmdlci83LjAuMjAuMTc4MSgweDY3MDAxNDNCKSBXaW5kb3dzV2VjaGF0KDB4NjMwOTA3MWQpIFhXRUIvODQ2MSBGbHVlIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlgtUmVxdWVzdGVkLVdpdGgiOiAiWE1MSHR0cFJlcXVlc3QiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgdmVyaWZ5PUZhbHNlLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHJlcyA9IHIuanNvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgcmVzLmdldCgiZXJyY29kZSIpID09IDA6CiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhkcmF3QmFsYW5jZU51bSA9IHNlbGYucmVtYWluICsgZmxvYXQocmVzWyJkYXRhIl1bIm1vbmV5Il0pCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZiLinIUg6LSm5Y+3W3tzZWxmLm5hbWV9XSDph5HluIHlhZHmjaLkuLrnjrDph5HmiJDlip/vvIzlvIDlp4vmj5DnjrDvvIzpooTorqHliLDotKYge3dpdGhkcmF3QmFsYW5jZU51bX0g5YWDID4+PiAiCiAgICAgICAgICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHdpdGhkcmF3QmFsYW5jZU51bSA8IHdpdGhkcmF3QmFsYW5jZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9Xeayoeaciei+vuWIsOaPkOeOsOagh+WHhiB7d2l0aGRyYXdCYWxhbmNlfSDlhYMiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYud2l0aGRyYXdQb3N0KCkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmIui0puWPt1t7c2VsZi5uYW1lfV0g6YeR5biB5YWR5o2i5Li6546w6YeR5aSx6LSl77yaIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIudGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICIg5o+Q546w5Zyw5Z2A77yaIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIiDmj5DnjrDlj4LmlbDvvJoiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcDEsCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgICAgICAjIHJhaXNlIGUKICAgICAgICAgICAgICAgICAgICAjIOWkhOeQhuW8guW4uAogICAgICAgICAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9XSDmj5DnjrDlpLHotKXvvJoiLCBlKQogICAgICAgICAgICBzZWxmLndpdGhkcmF3UG9zdCgpCgogICAgZGVmIGluaXQoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KAogICAgICAgICAgICAgICAgZ2V0TmV3SW52aXRlVXJsKCksCiAgICAgICAgICAgICAgICBoZWFkZXJzPXsKICAgICAgICAgICAgICAgICAgICAiVXBncmFkZS1JbnNlY3VyZS1SZXF1ZXN0cyI6ICIxIiwKICAgICAgICAgICAgICAgICAgICAiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTA3LjAuMC4wIFNhZmFyaS81MzcuMzYgTmV0VHlwZS9XSUZJIE1pY3JvTWVzc2VuZ2VyLzcuMC4yMC4xNzgxKDB4NjcwMDE0M0IpIFdpbmRvd3NXZWNoYXQoMHg2MzA5MDcxZCkgWFdFQi84NDYxIEZsdWUiLAogICAgICAgICAgICAgICAgICAgICJBY2NlcHQiOiAidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45IiwKICAgICAgICAgICAgICAgICAgICAiQWNjZXB0LUVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUiLAogICAgICAgICAgICAgICAgICAgICJBY2NlcHQtTGFuZ3VhZ2UiOiAiemgtQ04semg7cT0wLjkiLAogICAgICAgICAgICAgICAgICAgICJDb29raWUiOiBzZWxmLkNvb2tpZSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB2ZXJpZnk9RmFsc2UsCiAgICAgICAgICAgICAgICAjIOemgeatoumHjeWumuWQkQogICAgICAgICAgICAgICAgYWxsb3dfcmVkaXJlY3RzPUZhbHNlLAogICAgICAgICAgICApCiAgICAgICAgICAgIHNlbGYuZG9tbmFpbkhvc3QgPSByLmhlYWRlcnMuZ2V0KCJMb2NhdGlvbiIpLnNwbGl0KCIvIilbMl0KICAgICAgICAgICAgIyBwcmludChyLnRleHQpCiAgICAgICAgICAgIGlmIG15a2t5ZFJlYWRQdXJlTG9nID09IEZhbHNlOgogICAgICAgICAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1d5o+Q5Y+W5Yiw55qE5Z+f5ZCN77yae3NlbGYuZG9tbmFpbkhvc3R9IikKICAgICAgICAgICAgIyBzZWxmLmhlYWRlcnMgPSB7CiAgICAgICAgICAgICMgICAgICJDb25uZWN0aW9uIjogImtlZXAtYWxpdmUiLAogICAgICAgICAgICAjICAgICAiQWNjZXB0IjogImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCwgKi8qOyBxPTAuMDEiLAogICAgICAgICAgICAjICAgICAiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTA3LjAuMC4wIFNhZmFyaS81MzcuMzYgTmV0VHlwZS9XSUZJIE1pY3JvTWVzc2VuZ2VyLzcuMC4yMC4xNzgxKDB4NjcwMDE0M0IpIFdpbmRvd3NXZWNoYXQoMHg2MzA5MDYyMSkgWFdFQi84MzUxIEZsdWUiLAogICAgICAgICAgICAjICAgICAiWC1SZXF1ZXN0ZWQtV2l0aCI6ICJYTUxIdHRwUmVxdWVzdCIsCiAgICAgICAgICAgICMgICAgICJSZWZlcmVyIjogZiJodHRwOi8ve3NlbGYuZG9tbmFpbkhvc3R9LyIsCiAgICAgICAgICAgICMgICAgICJPcmlnaW4iOiBmImh0dHA6Ly97c2VsZi5kb21uYWluSG9zdH0iLAogICAgICAgICAgICAjICAgICAjICJIb3N0IjogZiJ7c2VsZi5kb21uYWluSG9zdH0iLAogICAgICAgICAgICAjICAgICAiQWNjZXB0LUVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUiLAogICAgICAgICAgICAjICAgICAiQWNjZXB0LUxhbmd1YWdlIjogInpoLUNOLHpoIiwKICAgICAgICAgICAgIyAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLAogICAgICAgICAgICAjICAgICAiQ29va2llIjogc2VsZi5Db29raWUsCiAgICAgICAgICAgICMgfQogICAgICAgICAgICAjICMg6I635Y+WcmVxdWVzdElkCiAgICAgICAgICAgIHNlbGYucmVhZEp1bXBQYXRoID0gIiIKICAgICAgICAgICAgaWYgbXlra3lkRGV0ZWN0aW5nU2VhbFN0YXR1czoKICAgICAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoCiAgICAgICAgICAgICAgICAgICAgZiJodHRwOi8ve3NlbGYuZG9tbmFpbkhvc3R9L2hhb2Jhb2Jhby9ob21lIiwKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPXsKICAgICAgICAgICAgICAgICAgICAgICAgIlVwZ3JhZGUtSW5zZWN1cmUtUmVxdWVzdHMiOiAiMSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJVc2VyLUFnZW50IjogIk1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMDcuMC4wLjAgU2FmYXJpLzUzNy4zNiBOZXRUeXBlL1dJRkkgTWljcm9NZXNzZW5nZXIvNy4wLjIwLjE3ODEoMHg2NzAwMTQzQikgV2luZG93c1dlY2hhdCgweDYzMDkwNzFkKSBYV0VCLzg0NjEgRmx1ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJBY2NlcHQiOiAidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45IiwKICAgICAgICAgICAgICAgICAgICAgICAgIkFjY2VwdC1FbmNvZGluZyI6ICJnemlwLCBkZWZsYXRlIiwKICAgICAgICAgICAgICAgICAgICAgICAgIkFjY2VwdC1MYW5ndWFnZSI6ICJ6aC1DTix6aDtxPTAuOSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJDb29raWUiOiBzZWxmLkNvb2tpZSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHZlcmlmeT1GYWxzZSwKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGh0bWx0ZXh0ID0gci50ZXh0CiAgICAgICAgICAgICAgICByZWFkX2p1bXBfcmVhZF90ZXh0ID0gZXh0cmFjdF9taWRkbGVfdGV4dCgKICAgICAgICAgICAgICAgICAgICBodG1sdGV4dCwgImZ1bmN0aW9uIHJlYWRfanVtcF9yZWFkKCl7IiwgInN1Y2Nlc3M6IGZ1bmN0aW9uIgogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgaWYgcmVhZF9qdW1wX3JlYWRfdGV4dDoKICAgICAgICAgICAgICAgICAgICByZWFkSnVtcFBhdGggPSBleHRyYWN0X21pZGRsZV90ZXh0KAogICAgICAgICAgICAgICAgICAgICAgICByZWFkX2p1bXBfcmVhZF90ZXh0LCAidXJsOiBkb21haW4rJyIsICInLCIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgaWYgcmVhZEp1bXBQYXRoOgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnJlYWRKdW1wUGF0aCA9IHJlYWRKdW1wUGF0aAogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZiLotKblj7dbe3NlbGYubmFtZX1dIOWIneWni+WMluWksei0pe+8jOivt+aJi+WKqOiuv+mXruS4i+ehruiupOmhtemdouayoeW0qea6gyDmiJbogIUg56iN5ZCO5YaN6K+V5ZCn77yM5LiA55u05LiN6KGM77yM6K+35YmN5b6AVEfnvqTlj43ppoh+ICIKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgaWYgIuWtmOWcqOi/neinhOaTjeS9nCIgaW4gaHRtbHRleHQ6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9XSDooqvmo4DmtYvliLDkuobvvIzlt7Lnu4/ooqvlsIHvvIznu4jmraLku7vliqHvvIzlv6vljrvmj5DphpLlpKflrrblkKd+ICIpCiAgICAgICAgICAgICAgICAgICAgICAgIHN5cy5leGl0KDApCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmIui0puWPt1t7c2VsZi5uYW1lfV0g5Yid5aeL5YyW5aSx6LSl77yM6K+35omL5Yqo6K6/6Zeu5LiL56Gu6K6k6aG16Z2i5rKh5bSp5rqDIOaIluiAhSDnqI3lkI7lho3or5XlkKfvvIzkuIDnm7TkuI3ooYzvvIzor7fliY3lvoBUR+e+pOWPjemmiH4gIgogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi5yZWFkSnVtcFBhdGggPSAiL2hhb2Jhb2Jhby93dG1wZG9tYWluMiIKICAgICAgICAgICAgIyAjIOiOt+WPluaPkOeOsOmhtemdouWcsOWdgAogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KAogICAgICAgICAgICAgICAgZiJodHRwOi8ve3NlbGYuZG9tbmFpbkhvc3R9L2hhb2Jhb2Jhby93aXRoZHJhdyIsCiAgICAgICAgICAgICAgICBoZWFkZXJzPXsKICAgICAgICAgICAgICAgICAgICAiVXBncmFkZS1JbnNlY3VyZS1SZXF1ZXN0cyI6ICIxIiwKICAgICAgICAgICAgICAgICAgICAiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTA3LjAuMC4wIFNhZmFyaS81MzcuMzYgTmV0VHlwZS9XSUZJIE1pY3JvTWVzc2VuZ2VyLzcuMC4yMC4xNzgxKDB4NjcwMDE0M0IpIFdpbmRvd3NXZWNoYXQoMHg2MzA5MDcxZCkgWFdFQi84NDYxIEZsdWUiLAogICAgICAgICAgICAgICAgICAgICJBY2NlcHQiOiAidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45IiwKICAgICAgICAgICAgICAgICAgICAiQWNjZXB0LUVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUiLAogICAgICAgICAgICAgICAgICAgICJBY2NlcHQtTGFuZ3VhZ2UiOiAiemgtQ04semg7cT0wLjkiLAogICAgICAgICAgICAgICAgICAgICJDb29raWUiOiBzZWxmLkNvb2tpZSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB2ZXJpZnk9RmFsc2UsCiAgICAgICAgICAgICkKICAgICAgICAgICAgaHRtbHRleHQgPSByLnRleHQKICAgICAgICAgICAgc2lnbmlkbCA9IHJlLnNlYXJjaCgncmVxdWVzdF9pZCA9ICIoLio/KSInLCBodG1sdGV4dCkKICAgICAgICAgICAgaWYgc2lnbmlkbCA9PSBbXToKICAgICAgICAgICAgICAgIGlmIG15a2t5ZFJlYWRQdXJlTG9nID09IEZhbHNlOgogICAgICAgICAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9XeWIneWni+WMliDmj5DnjrDlj4LmlbAg5aSx6LSl77yM5bCd6K+V5Y+m5LiA56eN5Yid5aeL5YyWID4+PiAiKQogICAgICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldCgKICAgICAgICAgICAgICAgICAgICBmImh0dHBzOi8vY29kZS5zeXdqbWxvdS5jb20uY24vYmFvYmFvY29kZS5waHAiLAogICAgICAgICAgICAgICAgICAgIHZlcmlmeT1GYWxzZSwKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGRvbW5haW5Ib3N0ID0gci5qc29uKClbImRhdGEiXVsibHVvZGkiXS5zcGxpdCgiLyIpWzJdCiAgICAgICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KAogICAgICAgICAgICAgICAgICAgIGYiaHR0cDovL3tkb21uYWluSG9zdH0vaGFvYmFvYmFvL3dpdGhkcmF3IiwKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPXsKICAgICAgICAgICAgICAgICAgICAgICAgIlVwZ3JhZGUtSW5zZWN1cmUtUmVxdWVzdHMiOiAiMSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJVc2VyLUFnZW50IjogIk1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMDcuMC4wLjAgU2FmYXJpLzUzNy4zNiBOZXRUeXBlL1dJRkkgTWljcm9NZXNzZW5nZXIvNy4wLjIwLjE3ODEoMHg2NzAwMTQzQikgV2luZG93c1dlY2hhdCgweDYzMDkwNzFkKSBYV0VCLzg0NjEgRmx1ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJBY2NlcHQiOiAidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45IiwKICAgICAgICAgICAgICAgICAgICAgICAgIkFjY2VwdC1FbmNvZGluZyI6ICJnemlwLCBkZWZsYXRlIiwKICAgICAgICAgICAgICAgICAgICAgICAgIkFjY2VwdC1MYW5ndWFnZSI6ICJ6aC1DTix6aDtxPTAuOSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJDb29raWUiOiBzZWxmLkNvb2tpZSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHZlcmlmeT1GYWxzZSwKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGh0bWx0ZXh0ID0gci50ZXh0CiAgICAgICAgICAgICAgICBzaWduaWRsID0gcmUuc2VhcmNoKCdyZXF1ZXN0X2lkID0gIiguKj8pIicsIGh0bWx0ZXh0KQogICAgICAgICAgICAgICAgaWYgc2lnbmlkbCA9PSBbXToKICAgICAgICAgICAgICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV0g5aSa5qyh5Yid5aeL5YyWIOaPkOeOsOWPguaVsCDlpLHotKUsIOi0puWPt+W8guW4uO+8jOivt+ajgOafpUNvb2tpZe+8gSIpCiAgICAgICAgICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldCgKICAgICAgICAgICAgICAgICAgICAgICAgZiJodHRwczovL2NvZGUuc3l3am1sb3UuY29tLmNuL2Jhb2Jhb2NvZGUucGhwIiwKICAgICAgICAgICAgICAgICAgICAgICAgdmVyaWZ5PUZhbHNlLAogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICBzZWxmLmRvbW5haW5Ib3N0ID0gci5qc29uKClbImRhdGEiXVsibHVvZGkiXS5zcGxpdCgiLyIpWzJdCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHNlbGYucmVxdWVzdF9pZCA9IHNpZ25pZGxbMV0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYucmVxdWVzdF9pZCA9IHNpZ25pZGxbMV0KICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICMgcmFpc2UgZQogICAgICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV3liJ3lp4vljJblpLHotKUs6K+35qOA5p+l5L2g55qEY2siKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgcnVuKHNlbGYpOgogICAgICAgIGlmIHNlbGYuaW5pdCgpOgogICAgICAgICAgICBzZWxmLnVzZXJfaW5mbygpCiAgICAgICAgICAgIHNlbGYuZ29sZCgpCiAgICAgICAgICAgIHNlbGYucmVhZCgpCiAgICAgICAgICAgICMg5aaC5p6c5o6l5Y+j5bSp5LqG77yM5bCx5bCd6K+V5LiJ5qyh6YeN5ZCv6ZiF6K+7CiAgICAgICAgICAgIGlmIHNlbGYucmV0cnlSZWFkaW5nID09IFRydWU6CiAgICAgICAgICAgICAgICBpZiBteWtreWRSZWFkUHVyZUxvZyA9PSBGYWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV0g5qOA5rWL5Yiw6ZiF6K+75o6l5Y+j5byC5bi477yM5bCd6K+V6YeN6K+VfiIpCiAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgzKToKICAgICAgICAgICAgICAgICAgICBzZWxmLnJlYWQoKQogICAgICAgICAgICAgICAgICAgICMg6ZqP5py65bu26L+fCiAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZG9tKCkgKiAzICsgMSkKICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLnJldHJ5UmVhZGluZyA9PSBGYWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgdGltZS5zbGVlcCgzKQogICAgICAgICAgICBzZWxmLmdvbGQoKQogICAgICAgICAgICB0aW1lLnNsZWVwKDMpCiAgICAgICAgICAgIHNlbGYud2l0aGRyYXcoKQoKCmRlZiBnZXROZXdJbnZpdGVVcmwoKToKICAgIHIgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vY29kZS5zeXdqbWxvdS5jb20uY24vYmFvYmFvY29kZS5waHAiLCB2ZXJpZnk9RmFsc2UpLmpzb24oKQogICAgaWYgci5nZXQoImNvZGUiKSA9PSAwOgogICAgICAgIG5ld0VudHJ5VXJsID0gci5nZXQoImRhdGEiKS5nZXQoImx1b2RpIikKICAgICAgICBwYXJzZWRfdXJsID0gdXJscGFyc2UobmV3RW50cnlVcmwpCiAgICAgICAgaG9zdCA9IHBhcnNlZF91cmwuaG9zdG5hbWUKICAgICAgICByZXR1cm4gZiJodHRwOi8vczFpNi4xb2JnLnNob3AvaGFvYmFvYmFvL2F1dGgvNTg0ODdmMjkxOTg1YzVmMzJjMTZiM2IwMWI5NmE5MTIiLnJlcGxhY2UoCiAgICAgICAgICAgICJzMWk2LjFvYmcuc2hvcCIsIGhvc3Qgb3IgInMxaTYuMW9iZy5zaG9wIgogICAgICAgICkKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuICJodHRwOi8vczFpNi4xb2JnLnNob3AvaGFvYmFvYmFvL2F1dGgvNTg0ODdmMjkxOTg1YzVmMzJjMTZiM2IwMWI5NmE5MTIiCgoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgICMgYXBwVG9rZW7vvJrov5nkuKrmmK/loat3eHB1c2hlcueahGFwcFRva2VuCiAgICAjIHRvcGljSWRz77ya6L+Z5Liq5pivd3hwdXNoZXLnmoR0b3BpY0lkc+aUueaIkOS9oOiHquW3seeahAogICAgIyDnpLrkvos6IOW5u+eUnyNvWmRCcDA0cHNnb044ZE4xRVRfdW84MU5UQzMxIzMwMDAjQVRfVXlJbGJqMjIyMm55bkVTYk0ydkp5QTdEcm1VbVVYRCMxMTY4NgogICAgYWNjb3VudHMgPSBvcy5nZXRlbnYoIm15a2t5ZCIpCiAgICBpbnZpdGVVcmwgPSBnZXROZXdJbnZpdGVVcmwoKQogICAgaWYgYWNjb3VudHMgaXMgTm9uZToKICAgICAgICBwcmludChmIuS9oOayoeacieWhq+WFpW15a2t5ZO+8jOWSi+i/kOihjO+8n1xu6LWw5LiL6YKA6K+35ZGX77yae2ludml0ZVVybH0iKQogICAgZWxzZToKICAgICAgICAjIOiOt+WPlueOr+Wig+WPmOmHj+eahOWAvO+8jOW5tuaMieaMh+WumuWtl+espuS4suWIhuWJsuaIkOWkmuS4qui0puWPt+eahOWPguaVsOe7hOWQiAogICAgICAgIGFjY291bnRzX2xpc3QgPSBvcy5lbnZpcm9uLmdldCgibXlra3lkIikuc3BsaXQoIiYiKQoKICAgICAgICAjIOi+k+WHuuacieWHoOS4qui0puWPtwogICAgICAgIG51bV9vZl9hY2NvdW50cyA9IGxlbihhY2NvdW50c19saXN0KQogICAgICAgIG1vcmVUaXAgPSAiIgogICAgICAgIGlmIHJlYWRQb3N0RGVsYXkgPiAwOgogICAgICAgICAgICBtb3JlVGlwID0gZiLlt7Lorr7nva7nmoTmjqjpgIHmlofnq6DnrYnlvoXngrnlh7vml7bpl7TkuLoge3JlYWRQb3N0RGVsYXl956eSICIKICAgICAgICBwcmludCgKICAgICAgICAgICAgZiLlvZPliY3ohJrmnKzniYjmnKzvvJrlubvnlJ/prZTmlLnoh6rnlKjniYggVjEuNTQgXG7lubvnlJ/mj5DnpLrvvJrojrflj5bliLAge251bV9vZl9hY2NvdW50c30g5Liq6LSm5Y+3IHttb3JlVGlwfVxu5rOo5YaM5Zyw5Z2A77yae2ludml0ZVVybH0iCiAgICAgICAgKQoKICAgICAgICAjIOmBjeWOhuaJgOaciei0puWPtwogICAgICAgIGZvciBpLCBhY2NvdW50IGluIGVudW1lcmF0ZShhY2NvdW50c19saXN0LCBzdGFydD0xKToKICAgICAgICAgICAgIyBwcmludCgiXG4iKQogICAgICAgICAgICBwcmludCgiLSIgKiA1MCkKICAgICAgICAgICAgcHJpbnQoZiLotKblj7dbe2FjY291bnQuc3BsaXQoJyMnKVswXX1d5byA5aeL5omn6KGM5Lu75YqhID4+PiIpCiAgICAgICAgICAgICMgcHJpbnQoIlxuIikKICAgICAgICAgICAgIyDmjIlA56ym5Y+35YiG5Ymy5b2T5YmN6LSm5Y+355qE5LiN5ZCM5Y+C5pWwCiAgICAgICAgICAgIHZhbHVlcyA9IGFjY291bnQuc3BsaXQoIiMiKQogICAgICAgICAgICAjIHByaW50KHZhbHVlcykKICAgICAgICAgICAgY2cgPSB7fQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBpZiBsZW4odmFsdWVzKSA9PSAyOgogICAgICAgICAgICAgICAgICAgIGNnID0gewogICAgICAgICAgICAgICAgICAgICAgICAibmFtZSI6IHZhbHVlc1swXSwKICAgICAgICAgICAgICAgICAgICAgICAgIkNvb2tpZSI6IHZhbHVlc1sxXSwKICAgICAgICAgICAgICAgICAgICAgICAgInR4YnoiOiAzMDAwLAogICAgICAgICAgICAgICAgICAgICAgICAiYWxpQWNjb3VudCI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiYWxpTmFtZSI6ICIiLAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgY2cgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICJuYW1lIjogdmFsdWVzWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAiQ29va2llIjogdmFsdWVzWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAidHhieiI6IHZhbHVlc1syXSBvciAzMDAwLAogICAgICAgICAgICAgICAgICAgICAgICAiYWxpQWNjb3VudCI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiYWxpTmFtZSI6ICIiLAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgIyDlpITnkIblvILluLgKICAgICAgICAgICAgICAgIHByaW50KCLlubvnlJ/pgLzpgLzlj6g6IiwgIumFjee9rueahOWVpeeOqeaEj++8jOe8uuWPguaVsOS6huaGqOaJue+8jOeci+a4heiEmuacrOivtOaYju+8gSIpCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBjZ1siYXBwVG9rZW4iXSA9ICIiCiAgICAgICAgICAgIGNnWyJ0b3BpY0lkcyJdID0gIiIKICAgICAgICAgICAgIyBwcmludCgi5omL5Yqo77yaIiwgbGVuKHZhbHVlcyksIHZhbHVlc1s0XSkKICAgICAgICAgICAgaWYgbGVuKHZhbHVlcykgPj0gNDoKICAgICAgICAgICAgICAgIGlmIHZhbHVlc1szXToKICAgICAgICAgICAgICAgICAgICBjZ1siYXBwVG9rZW4iXSA9IHZhbHVlc1szXQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgY2dbImFwcFRva2VuIl0gPSB3eHB1c2hlckFwcFRva2VuCiAgICAgICAgICAgIGlmIGxlbih2YWx1ZXMpID49IDU6CiAgICAgICAgICAgICAgICBpZiB2YWx1ZXNbNF06CiAgICAgICAgICAgICAgICAgICAgY2dbInRvcGljSWRzIl0gPSB2YWx1ZXNbNF0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGNnWyJ0b3BpY0lkcyJdID0gd3hwdXNoZXJUb3BpY0lkCiAgICAgICAgICAgIGlmIGxlbih2YWx1ZXMpID49IDY6CiAgICAgICAgICAgICAgICBpZiB2YWx1ZXNbNV06CiAgICAgICAgICAgICAgICAgICAgY2dbImFsaU5hbWUiXSA9IHZhbHVlc1s1XQogICAgICAgICAgICBpZiBsZW4odmFsdWVzKSA+PSA3OgogICAgICAgICAgICAgICAgaWYgdmFsdWVzWzZdOgogICAgICAgICAgICAgICAgICAgIGNnWyJhbGlBY2NvdW50Il0gPSB2YWx1ZXNbNl0KICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgaWYgd2VjaGF0QnVzc2luZXNzS2V5ID09ICIiOgogICAgICAgICAgICAgICAgICAgIGlmIGNnWyJhcHBUb2tlbiJdLnN0YXJ0c3dpdGgoIkFUXyIpID09IEZhbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludChmIuW5u+eUn+aPkOekuu+8jOi0puWPt1t7YWNjb3VudC5zcGxpdCgnIycpWzBdfV0gd3hwdXNoIOmFjee9rumUmeivr++8jOW/q+S7lOe7hueci+WktOmDqOivtOaYju+8gSIpCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgaWYgKGNnWyJhcHBUb2tlbiJdLnN0YXJ0c3dpdGgoIkFUXyIpID09IEZhbHNlKSBvciAoCiAgICAgICAgICAgICAgICAgICAgICAgIGNnWyJ0b3BpY0lkcyJdLmlzZGlnaXQoKSA9PSBGYWxzZQogICAgICAgICAgICAgICAgICAgICk6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KGYi5bm755Sf5o+Q56S677yM6LSm5Y+3W3thY2NvdW50LnNwbGl0KCcjJylbMF19XSB3eHB1c2gg6YWN572u6ZSZ6K+v77yM5b+r5LuU57uG55yL5aS06YOo6K+05piO77yBIikKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIGFwaSA9IEhIWUQoY2cpCiAgICAgICAgICAgICAgICBpZiBjZ1siYWxpTmFtZSJdIGFuZCBjZ1siYWxpQWNjb3VudCJdOgogICAgICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICAgICBmIuW5u+eUn+aPkOekuu+8jOi0puWPt1t7YWNjb3VudC5zcGxpdCgnIycpWzBdfV0g6YeH55So5LqGIOaUr+S7mOWuneaPkOeOsO+8jOWnk+WQje+8mntjZ1snYWxpTmFtZSddfe+8jOi0puaIt++8mntjZ1snYWxpQWNjb3VudCddfSIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHByaW50KGYi5bm755Sf5o+Q56S677yM6LSm5Y+3W3thY2NvdW50LnNwbGl0KCcjJylbMF19XSDph4fnlKjkuoYg5b6u5L+h5o+Q546wIikKICAgICAgICAgICAgICAgIGFwaS5ydW4oKQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICBmIuW5u+eUn+aPkOekuu+8jOi0puWPt1t7YWNjb3VudC5zcGxpdCgnIycpWzBdfV0g5Ye66ZSZ5ZWm77yM5Lmf6K645piv5bmz5Y+w5o6l5Y+j6Zeu6aKY77yM5Y+v5Lul6L+H5LiA5Lya5bCd6K+V6YeN5paw6L+Q6KGM77yM5aaC5p6c6L+Y5piv5LiN6KGM77yM6K+35bCG5LiL6Z2i5oql6ZSZ5oiq5Zu+5Y+R5YiwdGfkuqTmtYHnvqQ6IgogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgcmFpc2UgZQogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgIyBwcmludCgiXG4iKQogICAgICAgICAgICBwcmludCgiLSIgKiA1MCkKICAgICAgICAgICAgcHJpbnQoZiLotKblj7dbe2FjY291bnQuc3BsaXQoJyMnKVswXX1d5omn6KGM5Lu75Yqh5a6M5q+V77yBIikKICAgICAgICAgICAgIyBwcmludCgiXG4iKQo='))
except Exception as e:
    print('脚本执行出错:', str(e))
